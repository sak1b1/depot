<p id="notice"><%= notice %></p>

<h1>Carts</h1>

<table>
  <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
  <% cache @carts do %>
    <% @carts.each do |cart| %>
      <% Rails.logger.info "Cart id: #{cart[:id]} " %>
      <% cache @cart do %>
        <tr>
          <td><%= link_to 'Show', cart %></td>
          <td><%= link_to 'Edit', edit_cart_path(cart) %></td>
          <td><%= link_to 'Destroy', cart, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <h1>The cart id: <%= cart[:id] %> <%= link_to 'view', cart_path(cart[:id]) %></h1>
          <% cart.line_items.each do |item|  %>
          <h3> Item id: <%= item[:id]%> and product id: <%=  item[:product_id] %>
            <!-- products/1 -->
            <%= link_to 'view', product_path(item[:product_id]) %>
          </h3>

            <% Rails.logger.info "item id: #{item[:id]} and product id: #{item[:product_id]}" %>
          <% end %>
        </tr>
      <% end %>
    <% end %>
  <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Cart', new_cart_path %>
